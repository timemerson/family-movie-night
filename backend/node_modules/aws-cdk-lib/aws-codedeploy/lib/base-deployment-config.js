"use strict";var __runInitializers=exports&&exports.__runInitializers||function(thisArg,initializers,value){for(var useValue=arguments.length>2,i=0;i<initializers.length;i++)value=useValue?initializers[i].call(thisArg,value):initializers[i].call(thisArg);return useValue?value:void 0},__esDecorate=exports&&exports.__esDecorate||function(ctor,descriptorIn,decorators,contextIn,initializers,extraInitializers){function accept(f){if(f!==void 0&&typeof f!="function")throw new TypeError("Function expected");return f}for(var kind=contextIn.kind,key=kind==="getter"?"get":kind==="setter"?"set":"value",target=!descriptorIn&&ctor?contextIn.static?ctor:ctor.prototype:null,descriptor=descriptorIn||(target?Object.getOwnPropertyDescriptor(target,contextIn.name):{}),_,done=!1,i=decorators.length-1;i>=0;i--){var context={};for(var p in contextIn)context[p]=p==="access"?{}:contextIn[p];for(var p in contextIn.access)context.access[p]=contextIn.access[p];context.addInitializer=function(f){if(done)throw new TypeError("Cannot add initializers after decoration has completed");extraInitializers.push(accept(f||null))};var result=(0,decorators[i])(kind==="accessor"?{get:descriptor.get,set:descriptor.set}:descriptor[key],context);if(kind==="accessor"){if(result===void 0)continue;if(result===null||typeof result!="object")throw new TypeError("Object expected");(_=accept(result.get))&&(descriptor.get=_),(_=accept(result.set))&&(descriptor.set=_),(_=accept(result.init))&&initializers.unshift(_)}else(_=accept(result))&&(kind==="field"?initializers.unshift(_):descriptor[key]=_)}target&&Object.defineProperty(target,contextIn.name,descriptor),done=!0};Object.defineProperty(exports,"__esModule",{value:!0}),exports.BaseDeploymentConfig=exports.ComputePlatform=void 0;var jsiiDeprecationWarnings=()=>{var tmp=require("../../.warnings.jsii.js");return jsiiDeprecationWarnings=()=>tmp,tmp};const JSII_RTTI_SYMBOL_1=Symbol.for("jsii.rtti");var codedeploy_generated_1=()=>{var tmp=require("./codedeploy.generated");return codedeploy_generated_1=()=>tmp,tmp},utils_1=()=>{var tmp=require("./private/utils");return utils_1=()=>tmp,tmp},core_1=()=>{var tmp=require("../../core");return core_1=()=>tmp,tmp},helpers_internal_1=()=>{var tmp=require("../../core/lib/helpers-internal");return helpers_internal_1=()=>tmp,tmp},ComputePlatform;(function(ComputePlatform2){ComputePlatform2.SERVER="Server",ComputePlatform2.LAMBDA="Lambda",ComputePlatform2.ECS="ECS"})(ComputePlatform||(exports.ComputePlatform=ComputePlatform={}));let BaseDeploymentConfig=(()=>{let _classSuper=core_1().Resource,_instanceExtraInitializers=[],_get_deploymentConfigName_decorators,_get_deploymentConfigArn_decorators;return class BaseDeploymentConfig2 extends _classSuper{static{const _metadata=typeof Symbol=="function"&&Symbol.metadata?Object.create(_classSuper[Symbol.metadata]??null):void 0;_get_deploymentConfigName_decorators=[helpers_internal_1().memoizedGetter],_get_deploymentConfigArn_decorators=[helpers_internal_1().memoizedGetter],__esDecorate(this,null,_get_deploymentConfigName_decorators,{kind:"getter",name:"deploymentConfigName",static:!1,private:!1,access:{has:obj=>"deploymentConfigName"in obj,get:obj=>obj.deploymentConfigName},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,_get_deploymentConfigArn_decorators,{kind:"getter",name:"deploymentConfigArn",static:!1,private:!1,access:{has:obj=>"deploymentConfigArn"in obj,get:obj=>obj.deploymentConfigArn},metadata:_metadata},null,_instanceExtraInitializers),_metadata&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:_metadata})}static[JSII_RTTI_SYMBOL_1]={fqn:"aws-cdk-lib.aws_codedeploy.BaseDeploymentConfig",version:"2.238.0"};static fromDeploymentConfigName(scope,id,deploymentConfigName){const arn=core_1().Stack.of(scope).formatArn({service:"codedeploy",resource:"deploymentconfig",resourceName:deploymentConfigName,arnFormat:core_1().ArnFormat.COLON_RESOURCE_NAME});class Import extends core_1().Resource{deploymentConfigName=deploymentConfigName;deploymentConfigArn=arn;get deploymentConfigRef(){return{deploymentConfigName:this.deploymentConfigName}}}return new Import(scope,`${id}:Imported`)}resource=__runInitializers(this,_instanceExtraInitializers);get deploymentConfigName(){return this.getResourceNameAttribute(this.resource.ref)}get deploymentConfigArn(){return this.getResourceArnAttribute((0,utils_1().arnForDeploymentConfig)(this.resource.ref),{service:"codedeploy",resource:"deploymentconfig",resourceName:this.physicalName,arnFormat:core_1().ArnFormat.COLON_RESOURCE_NAME})}get deploymentConfigRef(){return{deploymentConfigName:this.deploymentConfigName}}constructor(scope,id,props){super(scope,id,{physicalName:props?.deploymentConfigName});try{jsiiDeprecationWarnings().aws_cdk_lib_aws_codedeploy_BaseDeploymentConfigProps(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,BaseDeploymentConfig2),error}if(props?.trafficRouting&&(props?.computePlatform===void 0||props?.computePlatform===ComputePlatform.SERVER))throw new(core_1()).ValidationError("Traffic routing config must not be specified for a Server-base deployment configuration",this);if(props?.minimumHealthyHosts&&props?.computePlatform&&props?.computePlatform!==ComputePlatform.SERVER)throw new(core_1()).ValidationError("Minimum healthy hosts config must only be specified for a Server-base deployment configuration",this);props?.zonalConfig&&(props.zonalConfig.monitorDuration&&this.validateMinimumDuration(props.zonalConfig.monitorDuration,"monitorDuration"),props.zonalConfig.firstZoneMonitorDuration&&this.validateMinimumDuration(props.zonalConfig.firstZoneMonitorDuration,"firstZoneMonitorDuration")),this.resource=new(codedeploy_generated_1()).CfnDeploymentConfig(this,"Resource",{deploymentConfigName:this.physicalName,computePlatform:props?.computePlatform,trafficRoutingConfig:props?.trafficRouting?.bind(this),minimumHealthyHosts:props?.minimumHealthyHosts?._json,zonalConfig:props?.zonalConfig?{monitorDurationInSeconds:props.zonalConfig.monitorDuration?.toSeconds(),firstZoneMonitorDurationInSeconds:props.zonalConfig.firstZoneMonitorDuration?.toSeconds(),minimumHealthyHostsPerZone:props.zonalConfig.minimumHealthyHostsPerZone?._json}:void 0}),this.node.addValidation({validate:()=>(0,utils_1().validateName)("Deployment config",this.physicalName)})}validateMinimumDuration(duration,name){const milliseconds=duration.toMilliseconds();if(milliseconds>0&&milliseconds<1e3)throw new(core_1()).ValidationError(`${name} must be greater than or equal to 1 second or be equal to 0, got ${milliseconds}ms`,this)}}})();exports.BaseDeploymentConfig=BaseDeploymentConfig;function ignore(_x){}
